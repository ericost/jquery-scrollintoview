/*
 * jQuery scrollintoview() plugin and :scrollable selector filter
 *
 * Version 1.8 (14 Jul 2011)
 * Requires jQuery 1.4 or newer
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
 (function(f){var b={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var h={duration:"fast",direction:"both",offset:false};var d=/^(?:html)$/i;var a=function(j,l){l=l||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(j,null):j.currentStyle);var k=document.defaultView&&document.defaultView.getComputedStyle?true:false;var e={top:parseFloat(k?l.borderTopWidth:f.css(j,"borderTopWidth"))||0,left:parseFloat(k?l.borderLeftWidth:f.css(j,"borderLeftWidth"))||0,bottom:parseFloat(k?l.borderBottomWidth:f.css(j,"borderBottomWidth"))||0,right:parseFloat(k?l.borderRightWidth:f.css(j,"borderRightWidth"))||0};return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,vertical:e.top+e.bottom,horizontal:e.left+e.right}};var c=function(e){var j=f(window);var i=d.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:a(e[0]),scroll:{top:(i?j:e).scrollTop(),left:(i?j:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var k=e[0].getBoundingClientRect();var l={top:i?0:k.top,left:i?0:k.left,bottom:i?e[0].clientHeight:k.bottom,right:i?e[0].clientWidth:k.right};l.height=l.bottom-l.top;l.width=l.right-l.left;return l}()}};f.fn.extend({scrollintoview:function(m){m=f.extend({},h,m);m.direction=b[typeof m.direction==="string"&&m.direction.toLowerCase()]||b.both;var q="";if(m.direction.x===true){q="horizontal"}if(m.direction.y===true){q=q?"both":"vertical"}var k=this.eq(0);var j=k.closest(":scrollable("+q+")");if(j.length>0){j=j.eq(0);var p={e:c(k),s:c(j)};var e={top:p.e.rect.top-(p.s.rect.top+p.s.border.top),bottom:p.s.rect.bottom-p.s.border.bottom-p.s.scrollbar.bottom-p.e.rect.bottom,left:p.e.rect.left-(p.s.rect.left+p.s.border.left),right:p.s.rect.right-p.s.border.right-p.s.scrollbar.right-p.e.rect.right};var r={};if(m.direction.y===true){var n=m.offset=="center"||m.offset=="center_vertical"?(p.s.rect.height-p.e.rect.height)/2:0;if(e.top<0){r.scrollTop=p.s.scroll.top+e.top-n}else{if(e.top>0&&e.bottom<0){r.scrollTop=p.s.scroll.top+Math.min(e.top,-e.bottom)+n}}}if(m.direction.x===true){if(e.left<0){r.scrollLeft=p.s.scroll.left+e.left}else{if(e.left>0&&e.right<0){r.scrollLeft=p.s.scroll.left+Math.min(e.left,-e.right)}}}if(!f.isEmptyObject(r)){if(d.test(j[0].nodeName)){j=f("html,body")}j.animate(r,m.duration).eq(0).queue(function(i){f.isFunction(m.complete)&&m.complete.call(j[0]);i()})}else{f.isFunction(m.complete)&&m.complete.call(j[0])}}return this}});var g={auto:true,scroll:true,visible:false,hidden:false};f.extend(f.expr[":"],{scrollable:function(r,t,o,p){var m=b[typeof o[3]==="string"&&o[3].toLowerCase()]||b.both;var k=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(r,null):r.currentStyle;var q={x:g[k.overflowX.toLowerCase()]||false,y:g[k.overflowY.toLowerCase()]||false,isRoot:d.test(r.nodeName)};if(!q.x&&!q.y&&!q.isRoot){return false}var j={height:{scroll:r.scrollHeight,client:r.clientHeight},width:{scroll:r.scrollWidth,client:r.clientWidth},scrollableX:function(){return(q.x||q.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(q.y||q.isRoot)&&this.height.scroll>this.height.client}};return m.y&&j.scrollableY()||m.x&&j.scrollableX()}})})(jQuery);
